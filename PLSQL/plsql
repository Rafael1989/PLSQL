#CRIAR USUÁRIO
CREATE USER cursoplsql IDENTIFIED BY cursoplsql
                       DEFAULT tablespace users;
                       
#DAR PERMISSÃO PARA O USUÁRIO
GRANT connect, resource TO cursoplsql;

#CRIAR TABELA
CREATE TABLE SegMercado(ID NUMBER(5),Descricao VARCHAR2(100));
CREATE TABLE Cliente
  ( ID NUMBER(5),
    Razao_Social VARCHAR2(100),
    CNPJ VARCHAR2(20),
    SegMercado_id NUMBER(5),
    Data_Inclusao DATE,
    #8 INTEIRO E 2 DECIMAIS
    Faturamento_Previsto NUMBER(10,2),
    Categoria VARCHAR2(20));

#NÃO DEIXAR ID NULO OU REPETIDO
ALTER TABLE Segmercado ADD CONSTRAINT SegMercado_id_pk PRIMARY KEY(ID);
ALTER TABLE Cliente ADD CONSTRAINT Cliente_id_pk PRIMARY KEY(ID);

#ADICIONA CHAVE ESTRANGEIRA
ALTER TABLE Cliente ADD CONSTRAINT Cliente_SegMercado_fk FOREIGN KEY(SegMercado_id) REFERENCES Segmercado(id) ;

#BLOCO PL/SQL

#LIGA VARIAVEL
SET SERVEROUTPUT ON

#DECLARAR VARIAVEIS
DECLARE
    v_id number(5) := 1;

#INÍCIO DO BLOCO
BEGIN
    v_id := 2;
    
    #IMPRIME NO CONSOLE
    Dbms_output.put_line(v_id);

#FIM DO BLOCO
END;

#BLOCO INSERT PL/SQL
DECLARE
    v_id number(5) := 1;
    v_descricao varchar2(100) := 'varejo';

BEGIN

    INSERT INTO segmercado VALUES (v_id, v_descricao);
    COMMIT;

END;

#BLOC PL/SQL SEM TIPOS(BOA PRÁTICA) + UPPERCASE
DECLARE
    v_id segmercado.id%type := 3;
    v_descricao segmercado.descricao%type := 'atacado';
BEGIN
    INSERT INTO SEGMERCADO VALUES (v_id,upper(v_descricao));
    COMMIT;
END;

#UPDATE
DECLARE
    v_id segmercado.id%type := 1;
    v_descricao segmercado.descricao%type := 'varejista';
BEGIN
    UPDATE SEGMERCADO SET DESCRICAO = UPPER(v_descricao) WHERE id = v_id;
    
    v_id := 2;
    v_descricao := 'atacadista';
    
    UPDATE SEGMERCADO SET DESCRICAO = UPPER(v_descricao) WHERE id = v_id;
    COMMIT;
END;

#DELETE
DECLARE
    v_id segmercado.id%type := 3;
BEGIN
    DELETE FROM SEGMERCADO WHERE id = v_id;
    COMMIT;
END;

